<style>
* {
box-sizing: border-box;
}

form{
font-family: verdana;
font-size: 12px;
}
div {
font-family: verdana;
font-size: 9px;
}
input[type=text], select, textarea {
font-family: verdana;
font-size: 11px;
padding: 1px;
border: 1px solid #ccc;
border-radius: 4px;
resize: vertical;
}

label {
display: inline-block;
}

input[type=submit] {
background-color: #04AA6D;
color: white;
padding: 12px 20px;
border: none;
border-radius: 4px;
cursor: pointer;
float: left;
}

input[type=submit]:hover {
background-color: #45a049;
}

.container {
border-radius: 5px;
background-color: #f2f2f2;
padding: 20px;
}

.col-25 {
float: left;
width: 25%;
margin-top: 6px;
}

.col-75 {
float: left;
width: 75%;
margin-top: 6px;
}

/* Clear floats after the columns */
.row:after {
content: "";
display: table;
clear: both;
}

/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {
.col-25, .col-75, input[type=submit] {
width: 100%;
margin-top: 0;
}
}
</style>

<form action="#" onsubmit="checkAppointment();return false">
driverLastName: <input type="text" id="driverLastName"/><br>
licenceNumber: <input type="text" id="licenceNumber"/><br>
keyword: <input type="password" id="keyword"/><br>
Exam type: <select name="examType" id="examType">
  <option value="5">Class 5</option>
  <option value="7">Class 7</option>
</select><br>
Attempt Number: <input type="number" id="attempt"/><br>
From date: <input type="date" id="startDate" name="startDate"><br>
<div id="posHTML"></div>
<input type="submit"/>
</form>
<br><br>
<div id="resp"></div>
<div id="err"></div>

<script>
    // ******* HTML Manipulation _ start 

//Generate POS HTML
posLocs = {
    1 : "31935 S Fraser Way #150, Abbotsford, BC V2T 5N7",
    2 : "3880 Lougheed Hwy, Burnaby, BC V5C 6N4",
    3 : "46052 Chilliwack Central Rd, Chilliwack, BC V2P 1J6",
    6 : "22470 Dewdney Trunk Rd #175, Maple Ridge, BC V2X 5Z6",
    8 : "1331 Marine Dr, North Vancouver, BC V7P 3E5",
    9 : "4126 Macdonald St, Vancouver, BC V6L 2P2",
    11 : "13426 78 Ave, Surrey, BC V3W 8J6",
    73 : "1930 Oxford Connector, Port Coquitlam, BC V3C 0A4",
    93 : "5300 No 3 Rd #402, Richmond, BC V6X 2X9",
    153 : "19950 Willowbrook Dr j7, Langley, BC V2Y 1K9",
    226 : "226 - unknown location",
    269 : "10262 152A Street, Surrey, BC V3R 6T8",
    270 : "6000 Production Way, Langley City, BC V3A 6L5",
    271 : "13665 68 Avenue, Surrey, BC V3W 0Y6", 
    272 : "100 Blue Mountain Street, Coquitlam, BC V3K 1A2",
    274 : "4399 Wayburne Drive, Burnaby, BC V5G 3X7",
    275 : "999 Kingsway, Vancouver, BC V5V 4Z7",
    276 : "1320 3rd Avenue, New Westminster, BC V3M 5T4",
    277 : "2885 Trethewey Street, Abbotsford, BC V2T 3R2"
}

var _0x2a77=['2xAGlUS','31935\x20S\x20Fraser\x20Way\x20#150,\x20Abbotsford,\x20BC\x20V2T\x205N7','final\x20','appendChild','readyState','<br>','16663uIjfRD','2885\x20Trethewey\x20Street,\x20Abbotsford,\x20BC\x20V2T\x203R2','<font\x20color=\x27red\x27>Enter\x20Driver\x20last\x20name,\x20license\x20number\x20and\x20keyword.\x20Also,\x20select\x20atleast\x20one\x20location.</font>','193SryTnb','length','getItem','PUT','getMonth','https://onlinebusiness.icbc.com/deas-api/v1/webLogin/webLogin','querySelectorAll','true','getElementById','checked','resp','3880\x20Lougheed\x20Hwy,\x20Burnaby,\x20BC\x20V5C\x206N4','13426\x2078\x20Ave,\x20Surrey,\x20BC\x20V3W\x208J6','localStorage','6486yFfDbO','label','getDate','setItem','driverLastName','Authorization','getAllResponseHeaders','attempt','POST','posLocs_','keyword','lastname','1930\x20Oxford\x20Connector,\x20Port\x20Coquitlam,\x20BC\x20V3C\x200A4','indexOf','Lenght\x20=\x20','93CkiXKQ','authorization','\x20\x22ignoreReserveTime\x22:\x20false\x20,','\x20\x22licenseNumber\x22:\x20\x22','226\x20-\x20unknown\x20location','\x20\x22prfDaysOfWeek\x22:\x20\x22[0,1,2,3,4,5,6]\x22,','type','Calling\x20id\x20-\x20','appointmentDt','4399\x20Wayburne\x20Drive,\x20Burnaby,\x20BC\x20V5G\x203X7','posLocs','createTextNode','End\x20Time\x20:\x20','createElement','onreadystatechange','post','\x20\x22lastName\x22:\x20\x22','Content-Type','name','\x20--\x20','err','4126\x20Macdonald\x20St,\x20Vancouver,\x20BC\x20V6L\x202P2','endTm','input[name=\x22posLocs\x22]:checked','startDate','1331\x20Marine\x20Dr,\x20North\x20Vancouver,\x20BC\x20V7P\x203E5','\x22,\x22keyword\x22:\x22','input','96599wWYwsp','examType','\x20\x22examType\x22:\x20\x22','licenceNumber','send','999\x20Kingsway,\x20Vancouver,\x20BC\x20V5V\x204Z7','log','value','application/json','parse','267478QiGtxB','open','status','posHTML','6000\x20Production\x20Way,\x20Langley\x20City,\x20BC\x20V3A\x206L5','dayOfWeek','19950\x20Willowbrook\x20Dr\x20j7,\x20Langley,\x20BC\x20V2Y\x201K9','\x20&\x20<font\x20color=\x27green\x27>Location\x20:\x20','Appointment\x20NOT\x20FOUND.','1881qtQGxG','setRequestHeader','</font>','Bearer\x20','startTm','{\x22drvrLastName\x22:\x22','Appointment\x20for\x20location\x20ID\x20','innerHTML','120950PTQVCd','806nScrUN','2dHEEhH','responseText'];var _0x1c51dc=_0x3dc1;(function(_0x3a9c8c,_0x396cf9){var _0x141264=_0x3dc1;while(!![]){try{var _0x41262e=parseInt(_0x141264(0xda))*-parseInt(_0x141264(0xe0))+-parseInt(_0x141264(0xd6))+parseInt(_0x141264(0xce))+-parseInt(_0x141264(0xc5))+-parseInt(_0x141264(0xbb))*parseInt(_0x141264(0xd8))+parseInt(_0x141264(0xd7))*parseInt(_0x141264(0xe3))+-parseInt(_0x141264(0xf1))*-parseInt(_0x141264(0x100));if(_0x41262e===_0x396cf9)break;else _0x3a9c8c['push'](_0x3a9c8c['shift']());}catch(_0x224926){_0x3a9c8c['push'](_0x3a9c8c['shift']());}}}(_0x2a77,0x23915));var label,i=0x0;for(pos in posLocs){label=document['createElement'](_0x1c51dc(0xf2));var description=document[_0x1c51dc(0xaa)](posLocs[pos]),checkbox=document[_0x1c51dc(0xac)](_0x1c51dc(0xba));checkbox[_0x1c51dc(0xa5)]='checkbox',checkbox[_0x1c51dc(0xb1)]=_0x1c51dc(0xa9),checkbox['id']=_0x1c51dc(0xfa)+pos,checkbox[_0x1c51dc(0xc2)]=pos,label['appendChild'](checkbox),label[_0x1c51dc(0xdd)](description),document[_0x1c51dc(0xeb)](_0x1c51dc(0xc8))['appendChild'](label);if(i%0x2==0x1)document[_0x1c51dc(0xeb)](_0x1c51dc(0xc8))[_0x1c51dc(0xdd)](document[_0x1c51dc(0xac)]('br'));i++;}document['getElementById'](_0x1c51dc(0xb7))[_0x1c51dc(0xc2)]=getToday();if((localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xf5))!=0x0|!localStorage['getItem'](_0x1c51dc(0xf5)))&(localStorage['getItem']('licenceNumber')!=0x0|!localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xbe)))&(localStorage['getItem'](_0x1c51dc(0xfb))!=0x0|!localStorage[_0x1c51dc(0xe5)]('keyword'))&(localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xf8))!=0x0|!localStorage[_0x1c51dc(0xe5)]('attempt'))&(localStorage[_0x1c51dc(0xe5)]('startDate')!=0x0|!localStorage['getItem'](_0x1c51dc(0xb7)))&(localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xbc))!=0x0|!localStorage['getItem'](_0x1c51dc(0xbc)))){document[_0x1c51dc(0xeb)]('driverLastName')[_0x1c51dc(0xc2)]=localStorage['getItem'](_0x1c51dc(0xf5)),document['getElementById'](_0x1c51dc(0xbe))[_0x1c51dc(0xc2)]=localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xbe)),document[_0x1c51dc(0xeb)](_0x1c51dc(0xfb))[_0x1c51dc(0xc2)]=localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xfb)),document[_0x1c51dc(0xeb)](_0x1c51dc(0xf8))[_0x1c51dc(0xc2)]=localStorage['getItem']('attempt'),document[_0x1c51dc(0xeb)]('startDate')[_0x1c51dc(0xc2)]=localStorage[_0x1c51dc(0xe5)]('startDate'),document[_0x1c51dc(0xeb)](_0x1c51dc(0xbc))[_0x1c51dc(0xc2)]=localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xbc));for(p in posLocs){document[_0x1c51dc(0xeb)](_0x1c51dc(0xfa)+p)[_0x1c51dc(0xec)]=localStorage[_0x1c51dc(0xe5)](_0x1c51dc(0xfa)+p)==_0x1c51dc(0xea)?!![]:![];}}function checkAppointment(){var _0x3d311d=_0x1c51dc,_0x537845=document[_0x3d311d(0xeb)](_0x3d311d(0xf5))[_0x3d311d(0xc2)],_0x47e7e5=document[_0x3d311d(0xeb)]('licenceNumber')[_0x3d311d(0xc2)],_0x5928b4=document[_0x3d311d(0xeb)](_0x3d311d(0xfb))[_0x3d311d(0xc2)],_0x15dbbd=document[_0x3d311d(0xeb)](_0x3d311d(0xf8))['value'],_0x535e19=document[_0x3d311d(0xeb)]('startDate')[_0x3d311d(0xc2)],_0x1dbe2e=document[_0x3d311d(0xeb)]('examType')[_0x3d311d(0xc2)];if(_0x537845!=''&_0x47e7e5!=''&_0x5928b4!=''&_0x15dbbd!=''&_0x535e19!=''&_0x1dbe2e!=''&document[_0x3d311d(0xe9)](_0x3d311d(0xb6))[_0x3d311d(0xe4)]>0x0){document[_0x3d311d(0xeb)](_0x3d311d(0xb3))['innerHTML']='',window['localStorage'][_0x3d311d(0xf4)]('driverLastName',_0x537845),window[_0x3d311d(0xf0)]['setItem']('licenceNumber',_0x47e7e5),window[_0x3d311d(0xf0)][_0x3d311d(0xf4)](_0x3d311d(0xfb),_0x5928b4),window[_0x3d311d(0xf0)][_0x3d311d(0xf4)](_0x3d311d(0xf8),_0x15dbbd),window[_0x3d311d(0xf0)][_0x3d311d(0xf4)](_0x3d311d(0xb7),_0x535e19),window[_0x3d311d(0xf0)][_0x3d311d(0xf4)]('examType',_0x1dbe2e);var _0x2b4050=document['querySelectorAll']('input[name=\x22posLocs\x22]');for(p in _0x2b4050){window[_0x3d311d(0xf0)][_0x3d311d(0xf4)]('posLocs_'+_0x2b4050[p]['value'],_0x2b4050[p][_0x3d311d(0xec)]);}appointmentAPICall(_0x537845,_0x47e7e5,_0x5928b4,_0x1dbe2e+'-R-'+_0x15dbbd,_0x535e19),document[_0x3d311d(0xeb)](_0x3d311d(0xed))['innerHTML']+=localStorage[_0x3d311d(0xe5)]('lastname')?localStorage['getItem'](_0x3d311d(0xfc)):'';}else console[_0x3d311d(0xc1)](_0x3d311d(0xff)+document[_0x3d311d(0xe9)](_0x3d311d(0xb6))[_0x3d311d(0xe4)]),document['getElementById'](_0x3d311d(0xb3))[_0x3d311d(0xd5)]=_0x3d311d(0xe2);}var accessToken='';function _0x3dc1(_0x291bfd,_0x352d46){return _0x3dc1=function(_0x2a774e,_0x3dc1e0){_0x2a774e=_0x2a774e-0xa1;var _0x19a624=_0x2a77[_0x2a774e];return _0x19a624;},_0x3dc1(_0x291bfd,_0x352d46);}function getToday(){var _0x44964d=_0x1c51dc,_0x301251=new Date(),_0x5dd9d4=_0x301251[_0x44964d(0xe7)]()+0x1,_0x26ac55=_0x301251[_0x44964d(0xf3)]();if(_0x5dd9d4<0xa)_0x5dd9d4='0'+_0x5dd9d4;if(_0x26ac55<0xa)_0x26ac55='0'+_0x26ac55;var _0xc88374=_0x301251['getFullYear']()+'-'+_0x5dd9d4+'-'+_0x26ac55;return _0xc88374;}function appointmentAPICall(_0x3e5978,_0x439ac4,_0x389a45,_0x13d549,_0x3bc139){var _0xe1962c=_0x1c51dc;document[_0xe1962c(0xeb)](_0xe1962c(0xed))['innerHTML']='';var _0x3d718b=_0xe1962c(0xe8),_0x17aca2=_0xe1962c(0xd3)+_0x3e5978+'\x22,\x22licenceNumber\x22:\x22'+_0x439ac4+_0xe1962c(0xb9)+_0x389a45+'\x22}',_0xb043a7=new XMLHttpRequest();return _0xb043a7[_0xe1962c(0xc6)](_0xe1962c(0xe6),_0x3d718b),_0xb043a7[_0xe1962c(0xcf)](_0xe1962c(0xb0),_0xe1962c(0xc3)),_0xb043a7[_0xe1962c(0xad)]=function(){var _0x51aa87=_0xe1962c;if(_0xb043a7[_0x51aa87(0xde)]===0x4&_0xb043a7['status']==0xc8){var _0x22de6d=_0xb043a7[_0x51aa87(0xf7)]();accessToken=_0x22de6d['substr'](_0x22de6d['indexOf'](_0x51aa87(0x101))+0x16,_0x22de6d[_0x51aa87(0xfe)]('\x0a')-0x16),_0x3d718b='https://onlinebusiness.icbc.com/deas-api/v1/web/getAvailableAppointments',method=_0x51aa87(0xae),headers={'content-type':'application/json','Authorization':accessToken},posLocs={0x1:_0x51aa87(0xdb),0x2:_0x51aa87(0xee),0x3:'46052\x20Chilliwack\x20Central\x20Rd,\x20Chilliwack,\x20BC\x20V2P\x201J6',0x6:'22470\x20Dewdney\x20Trunk\x20Rd\x20#175,\x20Maple\x20Ridge,\x20BC\x20V2X\x205Z6',0x8:_0x51aa87(0xb8),0x9:_0x51aa87(0xb4),0xb:_0x51aa87(0xef),0x49:_0x51aa87(0xfd),0x5d:'5300\x20No\x203\x20Rd\x20#402,\x20Richmond,\x20BC\x20V6X\x202X9',0x99:_0x51aa87(0xcb),0xe2:_0x51aa87(0xa3),0x10d:'10262\x20152A\x20Street,\x20Surrey,\x20BC\x20V3R\x206T8',0x10e:_0x51aa87(0xc9),0x10f:'13665\x2068\x20Avenue,\x20Surrey,\x20BC\x20V3W\x200Y6',0x110:'100\x20Blue\x20Mountain\x20Street,\x20Coquitlam,\x20BC\x20V3K\x201A2',0x112:_0x51aa87(0xa8),0x113:_0x51aa87(0xc0),0x114:'1320\x203rd\x20Avenue,\x20New\x20Westminster,\x20BC\x20V3M\x205T4',0x115:_0x51aa87(0xe1)};var _0x36430e=[],_0x3a03ed=document[_0x51aa87(0xe9)](_0x51aa87(0xb6)),_0x3e47c8=[];for(var _0x57028e=0x0;_0x57028e<_0x3a03ed[_0x51aa87(0xe4)];_0x57028e++){_0x3e47c8['push'](_0x3a03ed[_0x57028e][_0x51aa87(0xc2)]);}for(id in _0x3e47c8){_0x36430e[id]=new XMLHttpRequest(),console[_0x51aa87(0xc1)](_0x51aa87(0xa6)+_0x3e47c8[id]),reqJson='{'+'\x20\x22aPosID\x22:\x20'+_0x3e47c8[id]+',\x20'+_0x51aa87(0xbd)+_0x13d549+'\x22,'+'\x20\x22examDate\x22:\x20\x22'+_0x3bc139+'\x22,'+_0x51aa87(0xa1)+_0x51aa87(0xa4)+'\x20\x22prfPartsOfDay\x22:\x20\x22[0,1]\x22,'+_0x51aa87(0xaf)+_0x3e5978+'\x22,'+_0x51aa87(0xa2)+_0x439ac4+'\x22'+'\x20}',_0x36430e[id][_0x51aa87(0xc6)](_0x51aa87(0xf9),_0x3d718b,![]),_0x36430e[id][_0x51aa87(0xcf)](_0x51aa87(0xb0),'application/json'),_0x36430e[id][_0x51aa87(0xcf)](_0x51aa87(0xf6),_0x51aa87(0xd1)+accessToken),_0x36430e[id]['onreadystatechange']=function(){var _0x4c2453=_0x51aa87;if(_0x36430e[id][_0x4c2453(0xde)]===0x4){document[_0x4c2453(0xeb)](_0x4c2453(0xed))['innerHTML']+='<br>'+'Searching\x20for\x20location\x20'+posLocs[_0x3e47c8[id]];if(_0x36430e[id][_0x4c2453(0xd9)]['length']>0x2){document[_0x4c2453(0xeb)](_0x4c2453(0xed))[_0x4c2453(0xd5)]+=_0x4c2453(0xdf)+(_0x4c2453(0xd4)+_0x3e47c8[id]+_0x4c2453(0xcc)+posLocs[_0x3e47c8[id]]+'</font>');var _0x52f562=JSON[_0x4c2453(0xc4)](_0x36430e[id]['responseText']);console[_0x4c2453(0xc1)](_0x52f562);for(var _0x41478b=0x0;_0x41478b<_0x52f562[_0x4c2453(0xe4)];_0x41478b++){document[_0x4c2453(0xeb)](_0x4c2453(0xed))[_0x4c2453(0xd5)]+=_0x4c2453(0xdf)+('<font\x20color=\x27green\x27>Date\x20:\x20'+_0x52f562[_0x41478b]['appointmentDt']['date']+'</font>'),document[_0x4c2453(0xeb)]('resp')['innerHTML']+=_0x4c2453(0xdf)+('Day\x20:\x20'+_0x52f562[_0x41478b][_0x4c2453(0xa7)][_0x4c2453(0xca)]),document['getElementById'](_0x4c2453(0xed))[_0x4c2453(0xd5)]+='<br>'+('Start\x20Time\x20:\x20'+_0x52f562[_0x41478b][_0x4c2453(0xd2)]),document[_0x4c2453(0xeb)](_0x4c2453(0xed))[_0x4c2453(0xd5)]+=_0x4c2453(0xdf)+(_0x4c2453(0xab)+_0x52f562[_0x41478b][_0x4c2453(0xb5)]);}}else document[_0x4c2453(0xeb)](_0x4c2453(0xed))[_0x4c2453(0xd5)]+=_0x4c2453(0xb2)+_0x4c2453(0xcd);}},_0x36430e[id]['send'](reqJson);}}else _0xb043a7[_0x51aa87(0xde)]===0x4&_0xb043a7[_0x51aa87(0xc7)]==0x190&&(document['getElementById'](_0x51aa87(0xed))[_0x51aa87(0xd5)]+=_0x51aa87(0xdf)+('<font\x20color=\x27red\x27>Error:'+_0xb043a7[_0x51aa87(0xd9)]+_0x51aa87(0xd0)));},_0xb043a7[_0xe1962c(0xbf)](_0x17aca2),console[_0xe1962c(0xc1)](_0xe1962c(0xdc)+_0xb043a7[_0xe1962c(0xde)]),accessToken;}
</script>